
<div class="container chartcanvas">
    <div class="container">
        <div class="container">

            <div class="card shadow-sm mb-3">
                <div class="card-header">
                    <p class="lead mb-0">{{ environment_input.name }}</p>
                </div>
                <div class="card-body">
                    <p class="card-text" id="description">{{ environment_input.description }}</p>
            
                    <div class="form-inline" id="inputs">
                        <span class="mr-2">Value</span>
                        <input type="range" id="env_input_static_{{ environment_input.id }}" min={{ environment_input.value_min }}
                            max={{ environment_input.value_max }} value={{ environment_input.value_default }} step={{ environment_input.step }}
                            class="form-control" onmouseup="update_env_{{ environment_input.id }}()">
                        <span class="ml-2"><output id="env_output_int_static_{{ environment_input.id }}" type="int" />
                        <span><small class="text-muted">You can set the value for this input by moving the slider</small></span>
                    </div>
            
                    <hr>
                    <canvas id="chart_static_env_{{ environment_input.id }}" width="300" height="300"></canvas>
                </div>
            </div>

        </div>
    </div>
</div>


<script>
    var T = {{model.timeframe}}
    var array_static_env_{{ environment_input.id }}_new = new Array(T).fill(0);
    var array_static_env_{{ environment_input.id }}_default = new Array(T).fill({{ environment_input.value_default }});

    var months = ['January', 'February', 'March', 'April', 'May', 'June', 'July'];

    function update_env_{{ environment_input.id }}() {
        env_output_int_static_{{ environment_input.id }}.value = env_input_static_{{ environment_input.id }}.value;
        rangeToChart_env_{{ environment_input.id }}();
    };

    function rangeToChart_env_{{ environment_input.id }}() {

        var ctxStatic_{{ environment_input.id }} = document.getElementById('chart_static_env_{{ environment_input.id }}').getContext('2d');
        array_static_env_{{ environment_input.id }}_new = new Array(T).fill(env_input_static_{{ environment_input.id }}.value);

        var chart_static_env_{{ environment_input.id }} = new Chart(ctxStatic_{{ environment_input.id }}, {
            type: 'line',
            data: {
                labels: months,
                datasets: [{
                    label: 'current value',
                    borderColor: '#033E8C',
                    // backgroundColor:'#033E8C',
                    data: array_static_env_{{ environment_input.id }}_new,
                    // fill:false,
                    pointRadius:0
                }, {
                    label: 'default value',
                    borderColor: '#0455BF',
                    backgroundColor: '#0455BF',
                    data: array_static_env_{{ environment_input.id }}_default,
                    fill:true,
                    pointRadius:0
                }]
            },
            options: {
                legend: {
                    position: "bottom",
                },
                scales: {
                    yAxes: [{
                        ticks: {
                            max: {{ environment_input.value_max }}+{{ environment_input.step }},
                            min: {{ environment_input.value_min }}-{{ environment_input.step }},
                            stepSize: {{ environment_input.step }}
                        }
                    }]
                }
            }
        });
        

        chart_static_env_{{ environment_input.id }}.update();
    }


</script>